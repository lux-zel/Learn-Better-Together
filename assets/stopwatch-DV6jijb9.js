import"./modulepreload-polyfill-B5Qt9EMX.js";const m="stopwatch_today",y="stopwatch_alltime",S="stopwatch_sessions";function i(t){return btoa(JSON.stringify(t))}function u(t){try{return JSON.parse(atob(t))}catch{return null}}function g(t){return!t||typeof t!="object"||typeof t.total!="number"||t.total<0||typeof t.sessions!="number"||t.sessions<0?null:t}function p(t){return!t||typeof t!="object"||typeof t.duration!="number"||t.duration<1e3||typeof t.timestamp!="number"?null:t}let o=null,a=null,e=null;try{const t=localStorage.getItem(m);o=t?u(t):null,o=g(o)||{total:0,sessions:0}}catch{o={total:0,sessions:0}}try{const t=localStorage.getItem(y);a=t?u(t):null,a=g(a)||{total:0,sessions:0}}catch{a={total:0,sessions:0}}try{const t=localStorage.getItem(S);e=t?u(t):null,e=Array.isArray(e)?e.filter(n=>p(n)):[]}catch{e=[]}function f(t){const n=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);return`${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function h(){try{localStorage.setItem(m,i(o)),localStorage.setItem(y,i(a)),localStorage.setItem(S,i(e))}catch(t){console.error("Failed to save data:",t)}}function I(){const t=document.getElementById("todayTotal"),n=document.getElementById("todayCount"),l=document.getElementById("allTimeTotal"),r=document.getElementById("totalSessions");t&&(t.textContent=f(o.total)),n&&(n.textContent=o.sessions),l&&(l.textContent=f(a.total)),r&&(r.textContent=a.sessions);const s=document.getElementById("history");s&&(s.innerHTML="",e.forEach(c=>{if(!p(c))return;const d=document.createElement("div");d.textContent=`${c.formatted} - ${c.date} ${c.time}`,s.appendChild(d)}),e.length===0&&(s.innerHTML="<div>No sessions saved yet</div>"))}function T(){const t=new Date().toDateString();localStorage.getItem("stopwatch_lastdate")!==t&&(localStorage.setItem("stopwatch_lastdate",t),o={total:0,sessions:0},h())}T();I();
